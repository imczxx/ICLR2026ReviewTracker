{"id": "8QdA8mUfYF", "number": 10171, "cdate": 1758162966955, "mdate": 1759897669504, "content": {"title": "Answering Counterfactual Queries on Graph Databases", "abstract": "Counterfactual analysis on graph data is central to causal reasoning and interpretability, yet existing graph-based methods rely on ad hoc perturbations and remain tied to model behavior rather than underlying data. To address this challenge, we introduce Counterfactual Graph Database (CF-GDB) queries, the first query-based framework for counterfactual reasoning on graphs that grounds counterfactuals in verifiable database instances. Our approach abstracts graphs into semantically meaningful concepts and compares them using a hypergraph-based distance that integrates local structure with global semantics. To ensure efficiency and scalability, we propose two complementary indices: the Concept Distribution Index (CDI), a histogram that provides certified lower bounds, and the Concept Semantic Index (CSI), a continuous embedding that provides upper bounds. These indices yield provably tight sandwich guarantees and enable efficient candidate pruning while preserving the fidelity of counterfactual retrieval. Using 8 read data sets across 4 domains, CF-GDB improves accuracy by over 20% and achieves up to 20× faster performance, demonstrating both fidelity and scalability.", "tldr": "CF-GDB supports counterfactual reasoning on real graph database through C2GQ, leveraging CFI and CSI indices to deliver efficient and accurate search.", "keywords": ["Counterfactual Analysis", "Graph Database"], "primary_area": "learning on graphs and other geometries & topologies", "venue": "ICLR 2026 Conference Submission", "pdf": "/pdf/191d602ac801844fa70c3bc7321a4dbfc9aed696.pdf", "supplementary_material": ""}, "replies": [{"content": {"summary": {"value": "In this submission, the author(s)  focus(es) on the problem of graph query on counterfactual datasets. In particular, a query-based framework called the Counterfactual Graph Database (CF-GDB) has been proposed to enable counterfactual reasoning on graphs. There are two more modules: the Concept Distribution Index (CDI) and the Concept Semantic Index (CSI). These two modules can further efficiency and scalability of the proposed method. Extensive experiments show the effectiveness of the CF-GDB framework."}, "soundness": {"value": 2}, "presentation": {"value": 3}, "contribution": {"value": 2}, "strengths": {"value": "This submission has the following strengths:\n- This paper is clearly motivated and well organized.\n- This is the first work on retrieving the most relevant counterfacual graphs.\n- The paper provides detailed theoretical analysis.\n- The experimental results demonstrate the effectiveness of the proposed framework."}, "weaknesses": {"value": "This submission has the following weaknesses:\n- This work might be closely related to graph retrieval-augmented generation. The high-level idea is similar. The difference is that the query is graph and the database is counterfactuals.\n- There are no experiments on downstream tasks using the proposed framework."}, "questions": {"value": "I have the following questions/suggestions:\n- Are there existing studies that retrieve relevant counterfactual samples from databases rather than graphs?\n- It would be better to discuss the differences compared to graph retrieval-augmented generation."}, "flag_for_ethics_review": {"value": ["No ethics review needed."]}, "rating": {"value": 4}, "confidence": {"value": 2}, "code_of_conduct": {"value": "Yes"}}, "id": "JRNtod2UoE", "forum": "8QdA8mUfYF", "replyto": "8QdA8mUfYF", "signatures": ["ICLR.cc/2026/Conference/Submission10171/Reviewer_MQnh"], "nonreaders": [], "readers": ["everyone"], "writers": ["ICLR.cc/2026/Conference", "ICLR.cc/2026/Conference/Submission10171/Reviewer_MQnh"], "number": 1, "invitations": ["ICLR.cc/2026/Conference/Submission10171/-/Official_Review", "ICLR.cc/2026/Conference/-/Edit"], "domain": "ICLR.cc/2026/Conference", "tcdate": 1761932849236, "cdate": 1761932849236, "tmdate": 1762921538470, "mdate": 1762921538470, "parentInvitations": "ICLR.cc/2026/Conference/-/Official_Review", "license": "CC BY 4.0", "version": 2}, {"content": {"summary": {"value": "The paper studies the problem of finding a counterfactual example for a given graph from a graph database. It proposes a new distance measure, called _hypergraph-based distance_, to match the given graph with the graphs in the database. The approach is based on first clustering graph nodes according to their node embeddings (obtained from GNNs) and then applying a transport strategy to identify a counterfactual example. The new measure leads to improvement in both accuracy and time efficiency."}, "soundness": {"value": 3}, "presentation": {"value": 3}, "contribution": {"value": 3}, "strengths": {"value": "- The paper is well structured and clearly written, with an extensive literature review that provides a solid background for this line of research.\n- To the best of my knowledge, the results presented in the paper are novel. The paper provides rigorous theoretical analyses of time complexity and introduces a new hypergraph-based distance measure. In addition, it proposes two bounds (CDI and CSI) that effectively accelerate the search for counterfactuals."}, "weaknesses": {"value": "1. It may be clearer to introduce the core algorithm without graph-level indices first. Specifically, consider moving the three-step procedure on page 6 to the end of Section 4.2. Then, in Section 4.3, mention how the two bounds can be incorporated to speed up the procedure further.\n2. It would be helpful if the authors could elaborate on the roles of $\\alpha$ and $M$ in Step 2 of the three-step procedure (page 6). In particular, are there any considerations or potential pitfalls one should be aware of when selecting these parameters?\n\nMinor typo: \nLine 155: missing space between \"reusable\" and \"principal components\"."}, "questions": {"value": "1. What is the time complexity of the procedure without graph-level indices? Is it exponential?\n2. After incorporating graph-level indices, the procedure becomes approximate, right? What is the intuition behind applying CDI before CSI, and would it be acceptable to switch their order?\n3. In the experiments, do the other methods identify counterfactuals within the database, or are they allowed to generate new graphs outside of it?"}, "flag_for_ethics_review": {"value": ["No ethics review needed."]}, "details_of_ethics_concerns": {"value": "NA"}, "rating": {"value": 8}, "confidence": {"value": 2}, "code_of_conduct": {"value": "Yes"}}, "id": "jdtETJxrvS", "forum": "8QdA8mUfYF", "replyto": "8QdA8mUfYF", "signatures": ["ICLR.cc/2026/Conference/Submission10171/Reviewer_z5CM"], "nonreaders": [], "readers": ["everyone"], "writers": ["ICLR.cc/2026/Conference", "ICLR.cc/2026/Conference/Submission10171/Reviewer_z5CM"], "number": 2, "invitations": ["ICLR.cc/2026/Conference/Submission10171/-/Official_Review", "ICLR.cc/2026/Conference/-/Edit"], "domain": "ICLR.cc/2026/Conference", "tcdate": 1761983347127, "cdate": 1761983347127, "tmdate": 1762921538017, "mdate": 1762921538017, "parentInvitations": "ICLR.cc/2026/Conference/-/Official_Review", "license": "CC BY 4.0", "version": 2}, {"content": {"summary": {"value": "This work presents a graph-based method for producing counterfactuals based on queries/the underlying data rather than in a model-dependent manner. The author’s query-based framework abstracts graphs into semantic “concepts” and uses a hypergraph-based distance metric that combines local structure information with global semantics across the graph. The work also introduces two indices (CDI and CSI) which yield efficiency guarantees."}, "soundness": {"value": 3}, "presentation": {"value": 3}, "contribution": {"value": 3}, "strengths": {"value": "* Clear and principled motivation, preliminaries, notation, problem formulation (Sec 3 and 4.1).\n* The hypergraph-based concept distance presented is conceptually sound, and while computationally prohibitive at scale, the two graph-level indices presented—Concept Distribution Index (CDI) and Concept Semantic Index (CSI)—are sensible proxies in that they provide a lower and upper bound on this quantity.\n* Broad empirical evaluation across varied domains/applications.\n* C^2GQ (with index) achieves strong performance on Recall@1 and Mean Reciprocal Rank (MRR) across the 8 selected tasks with relatively low to moderate latency."}, "weaknesses": {"value": "* In Theorem 1, line 315, `WL-type count` is not defined or explained. I believe this to be in reference to Weisfeiler-Leman graph kernels or the Weisfeiler-Leman test. The paper would benefit from defining this and providing context for what it is and why it’s relevant/matters (including the references in Appendix B.1 and B.8).\n* [Both a benefit and a drawback] Empirical evaluation suggests that C^2GQ w/o index outperforms all other methods compared against at the expense of high latency.\n* In the context of C^2GQ, it’s unclear if it’s a reasonable expectation to be able to have a prebuilt index to enable rapid retrieval of a relevant candidate subset in practice, or what the offline cost is to acquire such index.\n* There is limited coverage around the limitations of this method, both theoretically/algorithmically and empirically/practically. The paper would benefit from some discussion in this area."}, "questions": {"value": "* The process of concept extraction you outline involves using K-Means to cluster H (the collection of final node embeddings across the database) into K prototypes. Given the empirical challenges and lack of clear, transferable guidance around using unsupervised clustering algorithms like K-Means:\n  1. How do you suggest selecting the value K? This strikes me as a fairly expensive hyperparameter to tune.\n  2. Given that this component yields a global semantic dictionary which C^2GQ depends heavily on, how important is it for these semantic concepts to be disjoint and reflective of (approximately) ground truth for the algorithm basis?\n  3. How robust is C^2GQ to the choice of K, given your empirical validation?  \n* In reference to the last points in both the Strengths and Weaknesses section, can you elaborate on the practical costs/overhead of producing a prebuilt index? In what context is this an unreasonable thing to either expect or yield, in which case C^2GQ w/o index would be a more appropriate method to employ?"}, "flag_for_ethics_review": {"value": ["No ethics review needed."]}, "rating": {"value": 6}, "confidence": {"value": 3}, "code_of_conduct": {"value": "Yes"}}, "id": "zNmkvZPVfT", "forum": "8QdA8mUfYF", "replyto": "8QdA8mUfYF", "signatures": ["ICLR.cc/2026/Conference/Submission10171/Reviewer_e6Pm"], "nonreaders": [], "readers": ["everyone"], "writers": ["ICLR.cc/2026/Conference", "ICLR.cc/2026/Conference/Submission10171/Reviewer_e6Pm"], "number": 3, "invitations": ["ICLR.cc/2026/Conference/Submission10171/-/Official_Review", "ICLR.cc/2026/Conference/-/Edit"], "domain": "ICLR.cc/2026/Conference", "tcdate": 1762292341220, "cdate": 1762292341220, "tmdate": 1762921537602, "mdate": 1762921537602, "parentInvitations": "ICLR.cc/2026/Conference/-/Official_Review", "license": "CC BY 4.0", "version": 2}], "withdrawn": false}